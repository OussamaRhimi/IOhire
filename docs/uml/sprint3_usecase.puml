@startuml
title Sprint 3 - Use Case Diagram (Academic)
left to right direction
skinparam packageStyle rectangle
skinparam shadowing false

actor Candidate as A_Candidate
actor "HR User" as A_HR
actor "AI Service (Ollama)" as A_AI

rectangle "IOhire - Sprint 3" {
  package "AI CandidateApplication Processing" {
    usecase "UC31 - Auto-process CandidateApplication" as UC31
    usecase "UC32 - Reprocess CandidateApplication" as UC32
    usecase "UC33 - Extract Resume Text" as UC33
    usecase "UC34 - Parse Resume into ExtractedData" as UC34
    usecase "UC35 - Evaluate CandidateApplication Match" as UC35
    usecase "UC36 - Generate StandardizedCV" as UC36
  }

  package "Template and PDF" {
    usecase "UC37 - Select CVTemplate" as UC37
    usecase "UC38 - Download StandardizedCV PDF (HR)" as UC38
    usecase "UC39 - Download StandardizedCV PDF (publicToken)" as UC39
  }

  package "Public Recommendation" {
    usecase "UC40 - Request JobRecommendations from Resume" as UC40
    usecase "UC41 - Extract SkillProfile for Recommendation" as UC41
    usecase "UC42 - Rank Open JobPostings by Compatibility" as UC42
    usecase "UC43 - Return Top JobRecommendations" as UC43
  }
}

A_HR --> UC32
A_HR --> UC37
A_HR --> UC38

A_Candidate --> UC39
A_Candidate --> UC40

UC31 ..> UC33 : <<include>>
UC31 ..> UC34 : <<include>>
UC31 ..> UC35 : <<include>>
UC31 ..> UC36 : <<include>>

UC32 ..> UC31 : <<include>>
UC38 ..> UC36 : <<include>>
UC39 ..> UC36 : <<include>>

UC40 ..> UC41 : <<include>>
UC40 ..> UC42 : <<include>>
UC40 ..> UC43 : <<include>>
UC40 ..> UC33 : <<include>>

A_AI -left-> UC34
A_AI -left-> UC36
A_AI -left-> UC41

note right of UC40
  Stateless recommendation path:
  resume upload -> skill extraction -> ranking.
end note

@enduml
