@startuml
title IOhire - Full Use Case Diagram
left to right direction
skinparam shadowing false
skinparam linetype ortho

actor "HR User" as HR
actor Candidate as C
actor "AI Service\n(Ollama)" as AI

rectangle "IOhire System" {

  ' --- HR use cases ---
  usecase "Authenticate" as UC_Auth
  usecase "Manage Job Postings" as UC_ManageJobs
  usecase "Configure AI Evaluation" as UC_AIConfig
  usecase "Manage Skills" as UC_Skills
  usecase "Manage Departments" as UC_Depts
  usecase "Review Candidates" as UC_Review
  usecase "Update Candidate Status" as UC_Status
  usecase "Bulk Update Status" as UC_Bulk
  usecase "Add HR Notes" as UC_Notes
  usecase "Download Resume" as UC_DlResume
  usecase "Select CV Template" as UC_Template
  usecase "Download Standardized CV (HR)" as UC_DlCvHR
  usecase "Reprocess Candidate" as UC_Reprocess
  usecase "View Analytics Dashboard" as UC_Analytics

  ' --- Public / Candidate use cases ---
  usecase "Browse Open Job Postings" as UC_Browse
  usecase "Submit Application" as UC_Submit
  usecase "Track Application" as UC_Track
  usecase "Delete Application (GDPR)" as UC_Delete
  usecase "Download Standardized CV (Public)" as UC_DlCvPub
  usecase "Request Job Recommendations" as UC_Recommend
  usecase "Chat with AI Assistant" as UC_Chat

  ' --- AI-internal use cases ---
  usecase "Process Candidate (AI Pipeline)" as UC_Process
}

' --- Actor associations ---
HR --> UC_Auth
HR --> UC_ManageJobs
HR --> UC_AIConfig
HR --> UC_Skills
HR --> UC_Depts
HR --> UC_Review
HR --> UC_Bulk
HR --> UC_Template
HR --> UC_DlCvHR
HR --> UC_Reprocess
HR --> UC_Analytics

C --> UC_Browse
C --> UC_Submit
C --> UC_Track
C --> UC_Delete
C --> UC_DlCvPub
C --> UC_Recommend
C --> UC_Chat

AI --> UC_Process
AI --> UC_Recommend
AI --> UC_Chat

' --- Include / Extend ---
UC_Review ..> UC_Status : <<include>>
UC_Review ..> UC_Notes : <<include>>
UC_Review ..> UC_DlResume : <<include>>

UC_Submit ..> UC_Process : <<triggers>>
UC_Reprocess ..> UC_Process : <<triggers>>

UC_DlCvPub ..> UC_Track : <<extend>>
UC_ManageJobs ..> UC_AIConfig : <<extend>>

' --- Layout helpers ---
UC_Auth -[hidden]down-> UC_ManageJobs
UC_ManageJobs -[hidden]down-> UC_Skills
UC_Skills -[hidden]down-> UC_Depts
UC_Depts -[hidden]down-> UC_Review
UC_Review -[hidden]down-> UC_Analytics

UC_Browse -[hidden]down-> UC_Submit
UC_Submit -[hidden]down-> UC_Track
UC_Track -[hidden]down-> UC_Delete
UC_Delete -[hidden]down-> UC_Recommend
UC_Recommend -[hidden]down-> UC_Chat

@enduml
