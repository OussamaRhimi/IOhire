@startuml
title Sprint 3 - Class Diagram

skinparam classAttributeIconSize 0
skinparam shadowing false
skinparam linetype ortho
left to right direction

class Candidate {
  +id: int
  +status: ApplicationStatus
  +score: decimal
  +extractedData: json
  +standardizedCvMarkdown: text
  +cvTemplateKey: CvTemplateKey
  +resume: Media
}

class JobPosting {
  +id: int
  +title: string
  +status: JobPostingStatus
  +requirements: Requirements
}

class Requirements <<value object>> {
  +skillsRequired: string[*]
  +skillsNiceToHave: string[*]
  +minYearsExperience: int
  +notes: string
}

class CVTemplate <<catalog>> {
  +key: CvTemplateKey
  +name: string
  +description: string
}

class AIProcessor <<service>> {
  +processCandidate(candidateId: int): void
  +extractResumeText(resume: Media): string
  +parseCV(text: string): json
  +evaluateFit(data: json, req: Requirements): decimal
  +generateStandardizedCV(data: json, template: CVTemplate): text
}

Candidate "*" --> "1" JobPosting : applies to >
JobPosting "1" *-- "1" Requirements : contains >
Candidate "1" --> "0..1" CVTemplate : uses >

AIProcessor ..> Candidate : processes >
AIProcessor ..> Requirements : reads >
AIProcessor ..> CVTemplate : renders with >

enum ApplicationStatus {
  new
  processing
  processed
  reviewing
  shortlisted
  rejected
  hired
  error
}

enum JobPostingStatus {
  draft
  open
  closed
}

enum CvTemplateKey {
  standard
  experience_first
  skills_first
  compact
  education_first
  project_focus
  sidebar_photo
  accent_pink
  teal_circle
  navy_gold
  sunset
}

@enduml
  teal_circle
  navy_gold
  sunset
}

@enduml
