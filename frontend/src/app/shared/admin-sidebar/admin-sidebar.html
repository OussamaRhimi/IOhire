<!-- Mobile hamburger trigger -->
@if (isMobile()) {
  <button class="admin-sidebar-hamburger btn btn--ghost" type="button" (click)="openMobile()" aria-label="Open navigation">
    <lucide-icon [img]="iconMenu" [size]="20" />
  </button>
}

<!-- Backdrop for mobile overlay -->
@if (isMobile() && mobileOpen()) {
  <div class="admin-sidebar-backdrop" (click)="closeMobile()"></div>
}

<aside
  class="admin-sidebar"
  [class.admin-sidebar--collapsed]="!isMobile() && collapsed()"
  [class.admin-sidebar--mobile]="isMobile()"
  [class.admin-sidebar--mobile-open]="isMobile() && mobileOpen()"
>
  <div class="admin-sidebar__top">
    <div class="admin-sidebar__brand">
      <div class="admin-sidebar__title">
        <span class="admin-sidebar__title-icon">
          <lucide-icon [img]="iconShield" [size]="14" />
        </span>
        @if (!collapsed() || isMobile()) {
          <span>Admin</span>
        }
      </div>
      @if (!collapsed() || isMobile()) {
        <div class="admin-sidebar__subtitle muted small">Workspace Control</div>
      }
    </div>
    @if (isMobile()) {
      <button class="btn btn--ghost btn--sm admin-sidebar__toggle" type="button" (click)="closeMobile()">
        <lucide-icon [img]="iconClose" [size]="16" />
      </button>
    } @else {
      <button class="btn btn--ghost btn--sm admin-sidebar__toggle" type="button" (click)="toggleCollapse()">
        <lucide-icon [img]="collapsed() ? iconExpand : iconCollapse" [size]="16" />
      </button>
    }
  </div>

  <nav class="admin-nav">
    @for (item of mainNav; track item.link) {
      <a
        [routerLink]="item.link"
        routerLinkActive="is-active"
        [routerLinkActiveOptions]="{ exact: true }"
        [attr.title]="(!isMobile() && collapsed()) ? item.label : null"
      >
        <span class="admin-nav__icon"><lucide-icon [img]="item.icon" [size]="16" /></span>
        @if (!collapsed() || isMobile()) {
          <span>{{ item.label }}</span>
        }
      </a>
    }

    @if (!collapsed() || isMobile()) {
      <div class="admin-nav__section muted small">HR</div>
    }

    @for (item of hrNav; track item.link) {
      <a [routerLink]="item.link" routerLinkActive="is-active" [attr.title]="(!isMobile() && collapsed()) ? item.label : null">
        <span class="admin-nav__icon"><lucide-icon [img]="item.icon" [size]="16" /></span>
        @if (!collapsed() || isMobile()) {
          <span>{{ item.label }}</span>
        }
      </a>
    }
  </nav>

  <div class="admin-sidebar__bottom">
    <button class="btn btn--ghost" type="button" (click)="toggleTheme()" [attr.title]="(!isMobile() && collapsed()) ? 'Toggle theme' : null">
      <lucide-icon [img]="theme.isDark() ? iconSun : iconMoon" [size]="16" />
      @if (!collapsed() || isMobile()) {
        @if (theme.isDark()) { <span>Light mode</span> } @else { <span>Dark mode</span> }
      }
    </button>
    <button class="btn btn--ghost" type="button" (click)="logout()" [attr.title]="(!isMobile() && collapsed()) ? 'Logout' : null">
      <lucide-icon [img]="iconLogout" [size]="16" />
      @if (!collapsed() || isMobile()) {
        <span>Logout</span>
      }
    </button>
  </div>
</aside>
